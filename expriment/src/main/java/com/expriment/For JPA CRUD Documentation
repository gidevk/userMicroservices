First create Entity class with autogenerated value like this.
for referance : https://www.baeldung.com/jpa-get-auto-generated-id
        @Id
        @GeneratedValue(strategy = GenerationType.SEQUENCE)
        .....
        .....
Create the JPA interface for entity.

        public interface UserDetailsJPA extends JpaRepository<UserDetails,Integer> { // It's Dao layer.

            }

after that in service class
    create a constructor and pass the Entity class as like this --

         @Autowired
         UserDetailsJPA  userDetailsJPA; // autowired for DAO layer EntityClassJPA.

          EntityManager entityManager; // create a EntityManage Class objet

          public ServiceClassName(EntityManager entityManager) { // this is a service constructor and pass EntityManager object
              this.entityManager = entityManager;
          }


          public Integer setId(UserDetails user){ // here we are setting the autogenerated value for save.
              entityManager.persist(user);
              return user.getUserId();
          }

          @Override
          @Transactional
          public UserDetails save(UserDetails userDetails){
              userDetails.setUserId(setId(userDetails)); // calling the setId for UserId.
             return userDetailsJPA.save(userDetails);
         }